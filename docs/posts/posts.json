[
  {
    "path": "posts/2021-05-19-blog2/",
    "title": "DAGs",
    "description": "Workbook 11 for the fulfillment of PSYC447 course (VUW).",
    "author": [
      {
        "name": "Emma Fahey",
        "url": {}
      }
    ],
    "date": "2021-05-19",
    "categories": [],
    "contents": "\r\nThree questions will be answered in this lab\r\nWhat is the difference between prediction and causal inference: give an example of how regression may be use useful for each task. Make sure your explanation includes a DAG.\r\n\r\n\r\n# this code chunk runs a successful dag. \r\n\r\n# data is nz_cr\r\n\r\n# y = life meaning LIFEMEANING\r\n# x = Religiousity Relid\r\n# z = Agreeableness AGREEABLENESS\r\n\r\n# use this code in the main methods section of report (after descriptive stats.)\r\n\r\n# code for DAG \r\nggdag_1 <- dagify(LIFEMEANING ~ AGREEABLENESS,\r\n                       Relid ~ AGREEABLENESS,\r\n                       exposure = \"Relid\",\r\n                       outcome = \"LIFEMEANING\") %>%\r\n  tidy_dagitty(layout = \"tree\")\r\n\r\n# plot the DAG\r\nggdag_1 %>%\r\n  ggdag() + \r\n  theme_dag_blank()\r\n\r\n\r\n\r\n# then we ask ggdag which variables we need to include if we are to obtain an unbiased estimate of the outcome from the exposure:\r\n\r\nggdag::ggdag_adjustment_set( ggdag_1 ) + \r\n  theme_dag_blank()\r\n\r\n\r\n\r\n#The graph tells us to obtain an unbiased estimate of Y on X we must condition on Z (agreeableness). \r\n# And indeed, when we included the omitted variable Z in our simulated dateset it breaks the association between X and Y:\r\n\r\nm1 <- lm(LIFEMEANING ~ Relid + AGREEABLENESS, data = nz_cr)\r\n\r\nparameters::model_parameters(m1)\r\n\r\n\r\nParameter     | Coefficient |       SE |       95% CI | t(4287) |      p\r\n------------------------------------------------------------------------\r\n(Intercept)   |        3.94 |     0.09 | [3.77, 4.12] |   43.15 | < .001\r\nRelid         |        0.06 | 6.32e-03 | [0.04, 0.07] |    8.99 | < .001\r\nAGREEABLENESS |        0.27 |     0.02 | [0.24, 0.30] |   15.91 | < .001\r\n\r\nreport::report(m1)\r\n\r\n\r\nWe fitted a linear model (estimated using OLS) to predict LIFEMEANING with Relid and AGREEABLENESS (formula: LIFEMEANING ~ Relid + AGREEABLENESS). The model explains a statistically significant and weak proportion of variance (R2 = 0.08, F(2, 4287) = 183.65, p < .001, adj. R2 = 0.08). The model's intercept, corresponding to Relid = 0 and AGREEABLENESS = 0, is at 3.94 (95% CI [3.77, 4.12], t(4287) = 43.15, p < .001). Within this model:\r\n\r\n  - The effect of Relid is statistically significant and positive (beta = 0.06, 95% CI [0.04, 0.07], t(4287) = 8.99, p < .001; Std. beta = 0.13, 95% CI [0.10, 0.16])\r\n  - The effect of AGREEABLENESS is statistically significant and positive (beta = 0.27, 95% CI [0.24, 0.30], t(4287) = 15.91, p < .001; Std. beta = 0.23, 95% CI [0.21, 0.26])\r\n\r\nStandardized parameters were obtained by fitting the model on a standardized version of the dataset.\r\n\r\nExplain “collider confounding” (or “collider bias”), and explain how collider bias can spoil inference. Make sure that your explanation includes a DAG.\r\n\r\n\r\n# collider code explanation \r\n# Imagine in science there is no relationship between the newsworthiness (N) of science and its trustworthiness (T). Imagine further that selection (S) committees make decisions on the basis of the both newsworthiness and the trustworthiness of scientific proposals.\r\n\r\n# collider code \r\n\r\n# s could be employment, gender, something 0 or 1. \r\n# height and religiousness on employment  \r\n\r\n# n = height (HLTH.Height)\r\n# T = religiousity (Relid) \r\n# s = employment (Employed)\r\n\r\ndag_sd <- dagify(Employed ~ HLTH.Height,\r\n                 Employed ~ Relid,\r\n                 labels = c(\"Employed\" = \"Employed\",\r\n                            \"HLTH.Height\" = \"Height\",\r\n                            \"Relid\" = \"Religiousity\")) %>%\r\n  tidy_dagitty(layout = \"nicely\")\r\n\r\n# Graph\r\ndag_sd %>%\r\n  ggdag(text = FALSE, use_labels = \"label\") + \r\n  theme_dag_blank()\r\n\r\n\r\n\r\n# next section \r\nggdag_dseparated(\r\n  dag_sd,\r\n  from = \"Relid\",\r\n  to = \"HLTH.Height\",\r\n  controlling_for = \"Employed\",\r\n  text = FALSE,\r\n  use_labels = \"label\", \r\n) + \r\n  theme_dag_blank()\r\n\r\n\r\n\r\n# code for finding colliders\r\nggdag::ggdag_collider(dag_sd,\r\n                      text = FALSE,\r\n                      use_labels = \"label\") + \r\n  theme_dag_blank()\r\n\r\n\r\n\r\n# the end - then explain that. \r\n\r\n\r\n\r\nUsing the nzl dataset, select at least five demongraphic/ideological variables that might be related to an exposure variable and and outcome variable of your choice. Create a DAG and identify which variables you should include to obtain an unbiased estimate of the causal effect of your exposure variable on your outcome variable. Test your model and interpret the results.\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-05-19-blog2/Blog_2_files/figure-html5/question 1-1.png",
    "last_modified": "2021-05-19T17:25:22+12:00",
    "input_file": "Blog_2.knit.md"
  },
  {
    "path": "posts/2021-05-12-welcome/",
    "title": "An Example of a Varying Slope Model",
    "description": "Workbook 10 for the fulfillment of 447 course (VUW).",
    "author": [
      {
        "name": "Emma Fahey",
        "url": {}
      }
    ],
    "date": "2021-05-12",
    "categories": [],
    "contents": "\r\nWeek 10 Workbook\r\nUsing the nzl dataset or another dataset of your choice, write a varying intercept/varying slope model.\r\nThe variables I have identified to answer this question are Personal Relationships and Agreeableness. This is due to the potential association between the variables over the years (waves). I hypothesize that as agreeableness increase, personal relationships should also increase. I expect these variables to change slightly over years as people develop and grow.\r\nBrief Methods\r\nThe data for this short report is taken from the New Zealand Attitudes and Values over time dataset (NZAVS). This dataset includes 2845 individuals that have responded on at least five different years to both personal relationship and agreeableness questions.\r\nWe fit the variables to a varying slope model to try and determine if the relationship between agreeableness and personal relationships changes over time. Each slope represents a different wave of the data (or different year that data was collected).\r\nFinally, we fit the model to a conditional effects graph to check that the two variables do indeed associate with each other in some way.\r\n\r\n\r\n \r\n\r\n\r\nAGREEABLENESS\r\n\r\n\r\nPredictors\r\n\r\n\r\nEstimates\r\n\r\n\r\nCI (95%)\r\n\r\n\r\nIntercept\r\n\r\n\r\n4.82\r\n\r\n\r\n4.76 – 4.87\r\n\r\n\r\nYour.Personal.Relationships\r\n\r\n\r\n0.07\r\n\r\n\r\n0.06 – 0.08\r\n\r\n\r\nRandom Effects\r\n\r\n\r\nσ2\r\n\r\n0.89\r\n\r\n\r\nτ00Wave\r\n\r\n0.00\r\n\r\n\r\nτ11Wave.Your.Personal.Relationships\r\n\r\n0.00\r\n\r\n\r\nρ01\r\n\r\n \r\n\r\n\r\nρ01\r\n\r\n \r\n\r\n\r\nICC\r\n\r\n\r\n0.00\r\n\r\n\r\nN Wave\r\n\r\n11\r\n\r\n\r\nObservations\r\n\r\n\r\n22067\r\n\r\n\r\nMarginal R2 / Conditional R2\r\n\r\n0.023 / 0.023\r\n\r\n\r\n\r\nThe above model does not appear to fit the model perfectly, so we then attempted to remove the random slope to see if we could generate a model that fits data better. The below model and graph is the result:\r\n\r\n\r\n \r\n\r\n\r\nAGREEABLENESS\r\n\r\n\r\nPredictors\r\n\r\n\r\nEstimates\r\n\r\n\r\nCI (95%)\r\n\r\n\r\nIntercept\r\n\r\n\r\n4.82\r\n\r\n\r\n4.77 – 4.87\r\n\r\n\r\nYour.Personal.Relationships\r\n\r\n\r\n0.07\r\n\r\n\r\n0.06 – 0.07\r\n\r\n\r\nRandom Effects\r\n\r\n\r\nσ2\r\n\r\n0.89\r\n\r\n\r\nτ00Wave\r\n\r\n0.00\r\n\r\n\r\nICC\r\n\r\n\r\n0.00\r\n\r\n\r\nN Wave\r\n\r\n11\r\n\r\n\r\nObservations\r\n\r\n\r\n22067\r\n\r\n\r\nMarginal R2 / Conditional R2\r\n\r\n0.023 / 0.023\r\n\r\n\r\n\r\nDiscussion\r\nBoth models above do not appear to fit the data particularly well and we can interpret that the models explanatory power is weak (R2 = 0.02, 89% CI [0.02, 0.03], adj. R2 = 0.02).\r\nFrom the conditional effects graph above, however, we can see that there may be a relationship between the two variables as this graph shows that as personal relationships increase, so do does agreeableness ratings or scores. Perhaps this relationship is simply consistent over time, which is why no large difference was found over the years in the varying slope models.\r\nThe other limitation of the models fit could be due to the dataset containing the same individuals over several years. Perhaps with different populations, ethnicities and/or countries measures there may be a more varying degree in the way these two variables associate.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-05-17T17:29:15+12:00",
    "input_file": {}
  }
]
